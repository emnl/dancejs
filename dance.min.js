(function(){var a,b,c,d,e,f,g,h,i,j;h=Array.prototype,j=Object.prototype,i=Number.prototype,f=h.map,d=h.reduce,e=h.reduceRight,c=h.filter,a=h.every,b=h.some,g=h.sort,h.__defineGetter__("clone",function(){return this.slice(0,this.length)}),h.__defineGetter__("tail",function(){return this.length<=1?[]:this.slice(1,this.length)}),h.__defineGetter__("head",function(){return this[0]}),h.__defineGetter__("last",function(){return this[this.length-1]}),h.__defineGetter__("init",function(){return this.slice(0,this.length-1)}),h.__defineGetter__("empty",function(){return this.length===0}),h.__defineGetter__("_reverse",function(){return this.length===0?[]:this.clone.reverse()}),h.__defineGetter__("rev",function(){return this._reverse}),h.add=h.append=function(a){return this.concat(a)},h.fadd=function(a){return this.slice(0,1).add(a)},h.map=f||function(a){return this.empty?[]:[a(this.head)].add(this.tail.map(a))},h.foldl=d||function(a,b){if(!b&&b!==0)throw"Foldl: no initial value specified";return this.empty?b:a(this.head,this.tail.foldl(a,b))},h.foldr=e||function(a,b){if(!b&&b!==0)throw"Foldr: no initial value specified";return this._reverse.foldl(a,b)},h.__defineGetter__("and",function(){return this.foldr(function(a,b){return a&&b},!0)}),h.__defineGetter__("or",function(){return this.foldr(function(a,b){return a||b},!1)}),h.__defineGetter__("sum",function(){var a;return a=this.foldl(function(a,b){return a+b},0),a===void 0?0:a}),h.__defineGetter__("product",function(){var a;return a=this.foldl(function(a,b){return a*b},1),a===void 0?0:a}),h.__defineGetter__("_concat",function(){return this.foldl(function(a,b){return a.add(b)},[])}),h.__defineGetter__("conc",function(){return this._concat}),h.any=b||function(a){return this.map(a).or},h.all=a||function(a){return this.map(a).and},h.concatMap=function(a){return this._concat.map(a)},h.__defineGetter__("maximum",function(){return this.maximumBy(function(a,b){return a>=b})}),h.__defineGetter__("minimum",function(){return this.minimumBy(function(a,b){return a<=b})}),h.insert=function(a){return this.insertBy(a,function(b,c){return a<=c})},h._delete=h.del=function(a){return this.deleteBy(a,function(b,c){return a===c})},j.replicate=function(a){return a<=0?[]:[this].add(this.replicate(a-1))},h.take=function(a){return a===0||this.empty?[]:this.fadd(this.tail.take(a-1))},h.drop=function(a){return a===0||this.empty?this:this.tail.drop(a-1)},h.takeWhile=function(a){return this.empty?[]:a(this.head)?this.fadd(this.tail.takeWhile(a)):[]},h.dropWhile=function(a){return this.empty?[]:a(this.head)?this.tail.dropWhile(a):this},h.__defineGetter__("group",function(){return this.groupBy(function(a,b){return a===b})}),h.elem=function(a){return this.indexOf(a)!==-1},h.notElem=function(a){return!this.elem(a)},h.find=function(a){return this.empty?null:a(this.head)?this.head:this.tail.find(a)},h.filter=c||function(a){return this.empty?[]:a(this.head)?this.fadd(this.tail.filter(a)):this.tail.filter(a)},h.zip=function(a){return this.empty||a.empty?[]:[[this.head,a.head]].add(this.tail.zip(a.tail))},i.__defineGetter__("even",function(){return this%2===0}),i.__defineGetter__("odd",function(){return!this.even}),h.maximumBy=h.minimumBy=function(a){if(this.empty)return;return this.length===1?this.head:a(this.head,this.tail.maximumBy(a))?this.head:this.tail.maximumBy(a)},h.insertBy=function(a,b){return this.empty?[a]:b(a,this.head)?[a].add(this):this.fadd(this.tail.insertBy(a,b))},h.deleteBy=function(a,b){if(this.empty)return;return b(a,this.head)?this.tail:this.fadd(this.tail.deleteBy(a,b))},h.sortBy=function(a){if(!g)throw"sortBy: you're missing sort(), uppgrade!";return this.clone.sort(a)},h.groupBy=function(a){var b,c,d;return this.empty?[]:this.length===1?[[this.head]]:(b=this.head,c=this.tail.takeWhile(function(c){return a(c,b)}),c=[b].add(c),d=this.drop(c.length),[c].add(d.groupBy(a)))}}).call(this)